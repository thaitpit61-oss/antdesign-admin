{"version":3,"sources":["src/pages/project/list/index.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { PageContainer, ProTable } from '@ant-design/pro-components';\r\nimport type { ProColumns } from '@ant-design/pro-components';\r\nimport { Button, Tag } from 'antd';\r\nimport { history } from '@umijs/max';\r\n\r\ntype Project = {\r\n  id: number;\r\n  ngay: string;\r\n  code: string;\r\n  maFast: string;\r\n  tenDuAn: string;\r\n  loaiDuAn: 'Loại 1' | 'Loại 2' | string;\r\n  nhanVien: string;\r\n  dienTich: number | string;\r\n  soGiayPhep: string;\r\n  ngayCap: string;\r\n  donGia: number | string; // custom: cho phép number/string\r\n  soLuong: number;\r\n  diaChi: string;\r\n  ngayDuyet: string;\r\n  nguoiDuyet: string;\r\n  daDuyet: boolean;\r\n};\r\n\r\nconst toNumber = (v: any) => {\r\n  if (typeof v === 'number') return v;\r\n  if (typeof v === 'string') return Number(v.replace(/,/g, ''));\r\n  return 0;\r\n};\r\n\r\nconst ProjectList: React.FC = () => {\r\n  const [data] = useState<Project[]>([\r\n    {\r\n      id: 1,\r\n      ngay: '2025-01-01',\r\n      code: 'DA-001',\r\n      maFast: 'MF001',\r\n      tenDuAn: 'Dự án A',\r\n      loaiDuAn: 'Loại 1',\r\n      nhanVien: 'Nguyễn A',\r\n      dienTich: 120,\r\n      soGiayPhep: 'GP-123',\r\n      ngayCap: '2024-12-01',\r\n      donGia: 1000000,\r\n      soLuong: 10,\r\n      diaChi: 'Hà Nội',\r\n      ngayDuyet: '2024-12-15',\r\n      nguoiDuyet: 'Ban QL',\r\n      daDuyet: true,\r\n    },\r\n    {\r\n      id: 2,\r\n      ngay: '2025-02-02',\r\n      code: 'DA-002',\r\n      maFast: 'MF002',\r\n      tenDuAn: 'Dự án B',\r\n      loaiDuAn: 'Loại 2',\r\n      nhanVien: 'Trần B',\r\n      dienTich: 80,\r\n      soGiayPhep: 'GP-456',\r\n      ngayCap: '2024-11-20',\r\n      donGia: 800000,\r\n      soLuong: 5,\r\n      diaChi: 'Hồ Chí Minh',\r\n      ngayDuyet: '2024-11-30',\r\n      nguoiDuyet: 'BGĐ',\r\n      daDuyet: false,\r\n    },\r\n  ]);\r\n\r\n  const columns: ProColumns<Project>[] = useMemo(\r\n    () => [\r\n      { title: 'ID', dataIndex: 'id', search: false, width: 70, fixed: 'left' },\r\n\r\n      { title: 'Mã', dataIndex: 'code', copyable: true, width: 120 },\r\n      { title: 'Mã Fast', dataIndex: 'maFast', copyable: true, width: 120 },\r\n\r\n      {\r\n        title: 'Tên dự án',\r\n        dataIndex: 'tenDuAn',\r\n        ellipsis: true,\r\n        width: 220,\r\n      },\r\n\r\n      {\r\n        title: 'Loại dự án',\r\n        dataIndex: 'loaiDuAn',\r\n        valueType: 'select',\r\n        width: 140,\r\n        valueEnum: {\r\n          'Loại 1': { text: 'Loại 1' },\r\n          'Loại 2': { text: 'Loại 2' },\r\n        },\r\n      },\r\n\r\n      { title: 'Nhân viên', dataIndex: 'nhanVien', width: 160 },\r\n      { title: 'Địa chỉ', dataIndex: 'diaChi', ellipsis: true, width: 180 },\r\n\r\n      // Hiển thị: không search\r\n      {\r\n        title: 'Diện tích (m²)',\r\n        dataIndex: 'dienTich',\r\n        search: false,\r\n        width: 140,\r\n        renderText: (v) => `${v}`,\r\n      },\r\n\r\n      // money: nên để number cho đẹp; nếu backend trả string có , thì parse\r\n      {\r\n        title: 'Đơn giá',\r\n        dataIndex: 'donGia',\r\n        search: false,\r\n        width: 140,\r\n        valueType: 'money',\r\n        renderText: (v) => toNumber(v),\r\n      },\r\n\r\n      {\r\n        title: 'Số lượng',\r\n        dataIndex: 'soLuong',\r\n        search: false,\r\n        width: 100,\r\n        valueType: 'digit',\r\n      },\r\n\r\n      {\r\n        title: 'Đã duyệt',\r\n        dataIndex: 'daDuyet',\r\n        width: 120,\r\n        valueType: 'select',\r\n        valueEnum: {\r\n          true: { text: 'Đã duyệt' },\r\n          false: { text: 'Chưa duyệt' },\r\n        },\r\n        render: (_, record) => (\r\n          <Tag color={record.daDuyet ? 'green' : 'default'}>\r\n            {record.daDuyet ? 'Đã duyệt' : 'Chưa duyệt'}\r\n          </Tag>\r\n        ),\r\n      },\r\n\r\n      { title: 'Ngày', dataIndex: 'ngay', valueType: 'date', search: false, width: 120 },\r\n      { title: 'Ngày duyệt', dataIndex: 'ngayDuyet', valueType: 'date', search: false, width: 120 },\r\n\r\n      {\r\n        title: 'Hành động',\r\n        valueType: 'option',\r\n        width: 140,\r\n        fixed: 'right',\r\n        render: (_, record) => [\r\n          <a key=\"view\" onClick={() => history.push(`/project/${record.id}`)}>\r\n            Xem\r\n          </a>,\r\n          <a key=\"edit\" onClick={() => history.push(`/project/${record.id}/edit`)}>\r\n            Sửa\r\n          </a>,\r\n        ],\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <PageContainer title=\"Quản lý dự án\">\r\n      <ProTable<Project>\r\n        rowKey=\"id\"\r\n        columns={columns}\r\n        dataSource={data}\r\n        search={{ labelWidth: 'auto' }}\r\n        pagination={{ pageSize: 10 }}\r\n        scroll={{ x: 1200 }}\r\n        rowSelection={{}}\r\n        toolBarRender={() => [\r\n          <Button key=\"create\" type=\"primary\" onClick={() => history.push('/project/create')}>\r\n            Tạo dự án mới\r\n          </Button>,\r\n        ]}\r\n      />\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default ProjectList;\r\n"],"names":[],"mappings":"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"}