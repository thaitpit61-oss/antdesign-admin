{"version":3,"sources":["src/pages/project/payment-schedule/edit/index.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { PageContainer, ProCard, ProForm, ProFormSelect, ProFormSwitch, ProFormText } from '@ant-design/pro-components';\r\nimport { history, useParams } from '@umijs/max';\r\nimport { Spin, message } from 'antd';\r\n\r\nconst MOCK = [\r\n  { id: 1, dot: 'Đợt 1', truongHop: 'Thanh toán theo tiến độ', khoangCach: '30 ngày', macDinh: true },\r\n];\r\n\r\nasync function fetchById(id: number) {\r\n  await new Promise((r) => setTimeout(r, 200));\r\n  return MOCK.find((x) => x.id === id);\r\n}\r\n\r\nconst PaymentScheduleEdit: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const scheduleId = useMemo(() => Number(id), [id]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [initialValues, setInitialValues] = useState<any>();\r\n\r\n  useEffect(() => {\r\n    fetchById(scheduleId).then((res) => {\r\n      if (!res) {\r\n        message.error('Không tìm thấy');\r\n        history.push('/project/payment-schedule');\r\n      } else {\r\n        setInitialValues(res);\r\n      }\r\n      setLoading(false);\r\n    });\r\n  }, [scheduleId]);\r\n\r\n  const onFinish = async (values: any) => {\r\n    console.log('Update', scheduleId, values);\r\n    message.success('Cập nhật thành công');\r\n    history.push(`/project/payment-schedule/${scheduleId}`);\r\n    return true;\r\n  };\r\n\r\n  return (\r\n    <PageContainer title=\"Sửa lịch thanh toán\" onBack={() => history.push(`/project/payment-schedule/${scheduleId}`)}>\r\n      <Spin spinning={loading}>\r\n        {initialValues && (\r\n          <ProCard>\r\n            <ProForm\r\n              layout=\"vertical\"\r\n              grid\r\n              colProps={{ span: 12 }}\r\n              initialValues={initialValues}\r\n              onFinish={onFinish}\r\n              submitter={{ searchConfig: { submitText: 'Cập nhật', resetText: 'Huỷ' } }}\r\n            >\r\n              <ProFormSelect name=\"dot\" label=\"Đợt\" rules={[{ required: true }]} options={[{ label: 'Đợt 1', value: 'Đợt 1' }]} />\r\n              <ProFormText name=\"truongHop\" label=\"Trường hợp\" rules={[{ required: true }]} colProps={{ span: 24 }} />\r\n              <ProFormText name=\"khoangCach\" label=\"Khoảng cách\" />\r\n              <ProFormSwitch name=\"macDinh\" label=\"Mặc định\" />\r\n            </ProForm>\r\n          </ProCard>\r\n        )}\r\n      </Spin>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default PaymentScheduleEdit;\r\n"],"names":[],"mappings":"iQAiEA,+CAAA,8CAjEoD,+HAEjB,sDAGnC,IAAM,EAAO,CACX,CAAE,GAAI,EAAG,IAAK,kBAAS,UAAW,4CAA2B,WAAY,aAAW,QAAS,CAAA,CAAK,EACnG,CAED,eAAe,EAAU,CAAU,EAEjC,OADA,MAAM,IAAI,QAAQ,AAAC,GAAM,WAAW,EAAG,MAChC,EAAK,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GACnC,KAqDA,EAnDsC,KACpC,GAAM,CAAE,GAAA,CAAE,CAAE,CAAG,GAAA,WAAS,IAClB,EAAa,GAAA,SAAO,EAAC,IAAM,OAAO,GAAK,CAAC,EAAG,EAE3C,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAe,EAAiB,CAAG,GAAA,UAAQ,IAElD,GAAA,WAAS,EAAC,KACR,EAAU,GAAY,IAAI,CAAC,AAAC,IACrB,EAIH,EAAiB,IAHjB,SAAO,CAAC,KAAK,CAAC,6BACd,SAAO,CAAC,IAAI,CAAC,8BAIf,EAAW,CAAA,GACb,GACF,EAAG,CAAC,EAAW,EAEf,IAAM,EAAW,MAAO,IACtB,QAAQ,GAAG,CAAC,SAAU,EAAY,GAClC,SAAO,CAAC,OAAO,CAAC,uCAChB,SAAO,CAAC,IAAI,CAAC,CAAC,0BAA0B,EAAE,EAAW,CAAC,EAC/C,CAAA,GAGT,MACE,UAAC,eAAa,EAAC,MAAM,mCAAsB,OAAQ,IAAM,SAAO,CAAC,IAAI,CAAC,CAAC,0BAA0B,EAAE,EAAW,CAAC,WAC7G,UAAC,SAAI,EAAC,SAAU,WACb,GACC,UAAC,SAAO,WACN,WAAC,SAAO,EACN,OAAO,WACP,IAAI,IACJ,SAAU,CAAE,KAAM,EAAG,EACrB,cAAe,EACf,SAAU,EACV,UAAW,CAAE,aAAc,CAAE,WAAY,qBAAY,UAAW,UAAM,CAAE,YAExE,UAAC,SAAa,EAAC,KAAK,MAAM,MAAM,gBAAM,MAAO,CAAC,CAAE,SAAU,CAAA,CAAK,EAAE,CAAE,QAAS,CAAC,CAAE,MAAO,kBAAS,MAAO,iBAAQ,EAAE,GAChH,UAAC,SAAW,EAAC,KAAK,YAAY,MAAM,4BAAa,MAAO,CAAC,CAAE,SAAU,CAAA,CAAK,EAAE,CAAE,SAAU,CAAE,KAAM,EAAG,IACnG,UAAC,SAAW,EAAC,KAAK,aAAa,MAAM,wBACrC,UAAC,SAAa,EAAC,KAAK,UAAU,MAAM,qCAOlD"}