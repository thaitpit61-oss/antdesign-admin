{"version":3,"sources":["src/pages/product/sale/detail/index.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { PageContainer, ProCard, ProDescriptions } from '@ant-design/pro-components';\r\nimport { Button, Spin, message } from 'antd';\r\nimport { history, useParams } from '@umijs/max';\r\n\r\ntype SalePhase = {\r\n  id: string;\r\n  quyetDinh: string;\r\n  duAn: string;\r\n  dot: string;\r\n  ngayBatDau: string;\r\n  ngayKetThuc: string;\r\n  thoiGianGiao: string;\r\n  soNguoi: number;\r\n  dienGia: string;\r\n  donGia: string;\r\n};\r\n\r\n// Mock data (giống list)\r\nconst MOCK_SALES: SalePhase[] = [\r\n  {\r\n    id: 'S-001',\r\n    quyetDinh: 'QD-01',\r\n    duAn: 'Dự án A',\r\n    dot: 'Đợt 1',\r\n    ngayBatDau: '2025-06-01',\r\n    ngayKetThuc: '2025-06-30',\r\n    thoiGianGiao: '30 ngày',\r\n    soNguoi: 5,\r\n    dienGia: '1,000,000',\r\n    donGia: '900,000',\r\n  },\r\n  {\r\n    id: 'S-002',\r\n    quyetDinh: 'QD-02',\r\n    duAn: 'Dự án B',\r\n    dot: 'Đợt 2',\r\n    ngayBatDau: '2025-07-01',\r\n    ngayKetThuc: '2025-07-15',\r\n    thoiGianGiao: '15 ngày',\r\n    soNguoi: 3,\r\n    dienGia: '800,000',\r\n    donGia: '750,000',\r\n  },\r\n];\r\n\r\nasync function fetchSaleById(id: string): Promise<SalePhase | null> {\r\n  await new Promise((r) => setTimeout(r, 200));\r\n  return MOCK_SALES.find((x) => x.id === id) ?? null;\r\n}\r\n\r\nconst ProductSaleDetail: React.FC = () => {\r\n  const params = useParams<{ id?: string }>();\r\n  const saleId = useMemo(() => (params.id ?? '').trim(), [params.id]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [sale, setSale] = useState<SalePhase | null>(null);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const run = async () => {\r\n      if (!saleId) {\r\n        message.error('ID không hợp lệ');\r\n        history.push('/product/sale');\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetchSaleById(saleId);\r\n        if (cancelled) return;\r\n\r\n        if (!res) {\r\n          message.warning('Không tìm thấy đợt mở bán');\r\n          history.push('/product/sale');\r\n          return;\r\n        }\r\n\r\n        setSale(res);\r\n      } catch {\r\n        if (!cancelled) message.error('Lỗi tải dữ liệu');\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    };\r\n\r\n    run();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [saleId]);\r\n\r\n  return (\r\n    <PageContainer\r\n      title=\"Chi tiết đợt mở bán\"\r\n      onBack={() => history.push('/product/sale')}\r\n      extra={[\r\n        <Button key=\"back\" onClick={() => history.push('/product/sale')}>\r\n          Quay lại danh sách\r\n        </Button>,\r\n        <Button\r\n          key=\"edit\"\r\n          type=\"primary\"\r\n          disabled={!sale}\r\n          onClick={() => history.push(`/product/sale/${saleId}/edit`)}\r\n        >\r\n          Sửa\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <Spin spinning={loading}>\r\n        {sale && (\r\n          <ProCard gutter={16} direction=\"column\">\r\n            <ProCard title=\"Thông tin đợt mở bán\" bordered>\r\n              <ProDescriptions<SalePhase>\r\n                column={2}\r\n                dataSource={sale}\r\n                columns={[\r\n                  { title: 'ID', dataIndex: 'id' },\r\n                  { title: 'Quyết định', dataIndex: 'quyetDinh' },\r\n                  { title: 'Dự án', dataIndex: 'duAn' },\r\n                  { title: 'Đợt', dataIndex: 'dot' },\r\n                  { title: 'Ngày bắt đầu', dataIndex: 'ngayBatDau' },\r\n                  { title: 'Ngày kết thúc', dataIndex: 'ngayKetThuc' },\r\n                  { title: 'Thời gian giao', dataIndex: 'thoiGianGiao' },\r\n                  { title: 'Số người', dataIndex: 'soNguoi' },\r\n                ]}\r\n              />\r\n            </ProCard>\r\n\r\n            <ProCard title=\"Giá\" bordered>\r\n              <ProDescriptions<SalePhase>\r\n                column={2}\r\n                dataSource={sale}\r\n                columns={[\r\n                  { title: 'Diện giá', dataIndex: 'dienGia' },\r\n                  { title: 'Đơn giá', dataIndex: 'donGia' },\r\n                ]}\r\n              />\r\n            </ProCard>\r\n          </ProCard>\r\n        )}\r\n      </Spin>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default ProductSaleDetail;\r\n"],"names":[],"mappings":"iQAoJA,+CAAA,8CApJoD,+HAGjB,YAgBnC,IAAM,EAA0B,CAC9B,CACE,GAAI,QACJ,UAAW,QACX,KAAM,kBACN,IAAK,kBACL,WAAY,aACZ,YAAa,aACb,aAAc,aACd,QAAS,EACT,QAAS,YACT,OAAQ,SACV,EACA,CACE,GAAI,QACJ,UAAW,QACX,KAAM,kBACN,IAAK,kBACL,WAAY,aACZ,YAAa,aACb,aAAc,aACd,QAAS,EACT,QAAS,UACT,OAAQ,SACV,EACD,CAED,eAAe,EAAc,CAAU,EAErC,OADA,MAAM,IAAI,QAAQ,AAAC,GAAM,WAAW,EAAG,MAChC,EAAW,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,IAAO,KAChD,KAmGA,EAjGoC,KAClC,IAAM,EAAS,GAAA,WAAS,IAClB,EAAS,GAAA,SAAO,EAAC,IAAM,AAAC,CAAA,EAAO,EAAE,EAAI,EAAC,EAAG,IAAI,GAAI,CAAC,EAAO,EAAE,CAAC,EAE5D,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAM,EAAQ,CAAG,GAAA,UAAQ,EAAmB,MAqCnD,MAnCA,GAAA,WAAS,EAAC,KACR,IAAI,EAAY,CAAA,EA6BhB,MADA,AA1BY,CAAA,UACV,GAAI,CAAC,EAAQ,CACX,SAAO,CAAC,KAAK,CAAC,gCACd,SAAO,CAAC,IAAI,CAAC,iBACb,OACF,CAEA,EAAW,CAAA,GACX,GAAI,CACF,IAAM,EAAM,MAAM,EAAc,GAChC,GAAI,EAAW,OAEf,GAAI,CAAC,EAAK,CACR,SAAO,CAAC,OAAO,CAAC,0DAChB,SAAO,CAAC,IAAI,CAAC,iBACb,OACF,CAEA,EAAQ,GACV,CAAE,KAAM,CACD,GAAW,SAAO,CAAC,KAAK,CAAC,uCAChC,QAAU,CACH,GAAW,EAAW,CAAA,GAC7B,CACF,CAAA,IAGO,KACL,EAAY,CAAA,EACd,EACF,EAAG,CAAC,EAAO,EAGT,UAAC,eAAa,EACZ,MAAM,6CACN,OAAQ,IAAM,SAAO,CAAC,IAAI,CAAC,iBAC3B,MAAO,CACL,UAAC,SAAM,EAAY,QAAS,IAAM,SAAO,CAAC,IAAI,CAAC,0BAAkB,8BAArD,QAGZ,UAAC,SAAM,EAEL,KAAK,UACL,SAAU,CAAC,EACX,QAAS,IAAM,SAAO,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAO,KAAK,CAAC,WAC3D,YAJK,QAOP,UAED,UAAC,SAAI,EAAC,SAAU,WACb,GACC,WAAC,SAAO,EAAC,OAAQ,GAAI,UAAU,mBAC7B,UAAC,SAAO,EAAC,MAAM,4CAAuB,QAAQ,aAC5C,UAAC,iBAAe,EACd,OAAQ,EACR,WAAY,EACZ,QAAS,CACP,CAAE,MAAO,KAAM,UAAW,IAAK,EAC/B,CAAE,MAAO,4BAAc,UAAW,WAAY,EAC9C,CAAE,MAAO,gBAAS,UAAW,MAAO,EACpC,CAAE,MAAO,gBAAO,UAAW,KAAM,EACjC,CAAE,MAAO,iCAAgB,UAAW,YAAa,EACjD,CAAE,MAAO,2BAAiB,UAAW,aAAc,EACnD,CAAE,MAAO,sBAAkB,UAAW,cAAe,EACrD,CAAE,MAAO,0BAAY,UAAW,SAAU,EAC3C,KAIL,UAAC,SAAO,EAAC,MAAM,SAAM,QAAQ,aAC3B,UAAC,iBAAe,EACd,OAAQ,EACR,WAAY,EACZ,QAAS,CACP,CAAE,MAAO,mBAAY,UAAW,SAAU,EAC1C,CAAE,MAAO,uBAAW,UAAW,QAAS,EACzC,YAQjB"}