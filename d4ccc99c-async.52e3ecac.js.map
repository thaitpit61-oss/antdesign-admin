{"version":3,"sources":["src/pages/project/promotions/create/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n  PageContainer,\r\n  ProCard,\r\n  ProForm,\r\n  ProFormDatePicker,\r\n  ProFormDigit,\r\n  ProFormSelect,\r\n  ProFormText,\r\n  ProFormTextArea,\r\n} from '@ant-design/pro-components';\r\nimport { history } from '@umijs/max';\r\nimport { message } from 'antd';\r\nimport dayjs from 'dayjs';\r\n\r\ntype PromotionCreateForm = {\r\n  duAn?: string;\r\n  tenChuongTrinh?: string;\r\n  tenQuaTang?: string;\r\n  keHoachBanHang?: string;\r\n  tuNGay?: any; // dayjs\r\n  denNgay?: any; // dayjs\r\n  tyLe?: number; // %\r\n  tienMat?: number; // tiền mặt\r\n  nhanVienTao?: string;\r\n  ngayTao?: any; // dayjs\r\n};\r\n\r\nasync function createPromotion(payload: any) {\r\n  await new Promise((r) => setTimeout(r, 200));\r\n  console.log('Create promotion', payload);\r\n  return true;\r\n}\r\n\r\nconst PromotionCreate: React.FC = () => {\r\n  const onFinish = async (values: any) => {\r\n    // Convert dayjs -> string để đồng bộ backend/mock\r\n    const payload = {\r\n      ...values,\r\n      tuNGay: values.tuNGay ? values.tuNGay.format('YYYY-MM-DD') : undefined,\r\n      denNgay: values.denNgay ? values.denNgay.format('YYYY-MM-DD') : undefined,\r\n      ngayTao: values.ngayTao ? values.ngayTao.format('YYYY-MM-DD') : undefined,\r\n    };\r\n\r\n    await createPromotion(payload);\r\n    message.success('Tạo chương trình thành công (mock)');\r\n    history.push('/project/promotions');\r\n    return true;\r\n  };\r\n\r\n  return (\r\n    <PageContainer title=\"Tạo chương trình khuyến mãi\" onBack={() => history.push('/project/promotions')}>\r\n      <ProCard>\r\n        <ProForm<PromotionCreateForm>\r\n          layout=\"vertical\"\r\n          grid\r\n          colProps={{ span: 12 }}\r\n          initialValues={{\r\n            duAn: 'Dự án A',\r\n            ngayTao: dayjs(),\r\n          }}\r\n          onFinish={onFinish}\r\n          submitter={{\r\n            searchConfig: { submitText: 'Tạo', resetText: 'Huỷ' },\r\n            resetButtonProps: {\r\n              onClick: (e) => {\r\n                e.preventDefault();\r\n                history.push('/project/promotions');\r\n              },\r\n            },\r\n          }}\r\n        >\r\n          <ProFormSelect\r\n            name=\"duAn\"\r\n            label=\"Dự án\"\r\n            rules={[{ required: true, message: 'Vui lòng chọn dự án' }]}\r\n            valueEnum={{\r\n              'Dự án A': { text: 'Dự án A' },\r\n              'Dự án B': { text: 'Dự án B' },\r\n            }}\r\n          />\r\n\r\n          <ProFormText\r\n            name=\"tenChuongTrinh\"\r\n            label=\"Tên chương trình\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập tên chương trình' }]}\r\n            colProps={{ span: 24 }}\r\n          />\r\n\r\n          <ProFormText name=\"tenQuaTang\" label=\"Quà tặng\" colProps={{ span: 24 }} />\r\n\r\n          <ProFormTextArea\r\n            name=\"keHoachBanHang\"\r\n            label=\"Kế hoạch bán hàng\"\r\n            colProps={{ span: 24 }}\r\n            fieldProps={{ rows: 4 }}\r\n          />\r\n\r\n          <ProFormDatePicker\r\n            name=\"tuNGay\"\r\n            label=\"Từ ngày\"\r\n            rules={[{ required: true, message: 'Vui lòng chọn từ ngày' }]}\r\n            fieldProps={{ format: 'YYYY-MM-DD' }}\r\n          />\r\n\r\n          <ProFormDatePicker\r\n            name=\"denNgay\"\r\n            label=\"Đến ngày\"\r\n            rules={[{ required: true, message: 'Vui lòng chọn đến ngày' }]}\r\n            fieldProps={{ format: 'YYYY-MM-DD' }}\r\n          />\r\n\r\n          <ProFormDigit\r\n            name=\"tyLe\"\r\n            label=\"Tỷ lệ (%)\"\r\n            min={0}\r\n            max={100}\r\n            fieldProps={{ precision: 0, addonAfter: '%' }}\r\n          />\r\n\r\n          <ProFormDigit\r\n            name=\"tienMat\"\r\n            label=\"Tiền mặt\"\r\n            min={0}\r\n            fieldProps={{\r\n              precision: 0,\r\n              formatter: (v) => (v ? `${v}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') : ''),\r\n              parser: (v) => Number((v || '').replace(/,/g, '')),\r\n            }}\r\n          />\r\n\r\n          <ProFormText name=\"nhanVienTao\" label=\"Nhân viên tạo\" />\r\n\r\n          <ProFormDatePicker\r\n            name=\"ngayTao\"\r\n            label=\"Ngày tạo\"\r\n            fieldProps={{ format: 'YYYY-MM-DD' }}\r\n          />\r\n        </ProForm>\r\n      </ProCard>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default PromotionCreate;\r\n"],"names":[],"mappings":"iQAgJA,+CAAA,uMArIwB,yCAEN,aAelB,eAAe,EAAgB,CAAY,EAGzC,OAFA,MAAM,IAAI,QAAQ,AAAC,GAAM,WAAW,EAAG,MACvC,QAAQ,GAAG,CAAC,mBAAoB,GACzB,CAAA,EACT,KAgHA,EA9GkC,KAChC,IAAM,EAAW,MAAO,IAEtB,IAAM,EAAU,CACd,GAAG,CAAM,CACT,OAAQ,EAAO,MAAM,CAAG,EAAO,MAAM,CAAC,MAAM,CAAC,cAAgB,KAAA,EAC7D,QAAS,EAAO,OAAO,CAAG,EAAO,OAAO,CAAC,MAAM,CAAC,cAAgB,KAAA,EAChE,QAAS,EAAO,OAAO,CAAG,EAAO,OAAO,CAAC,MAAM,CAAC,cAAgB,KAAA,CAClE,EAKA,OAHA,MAAM,EAAgB,GACtB,SAAO,CAAC,OAAO,CAAC,8DAChB,SAAO,CAAC,IAAI,CAAC,uBACN,CAAA,EACT,EAEA,MACE,UAAC,eAAa,EAAC,MAAM,wDAA8B,OAAQ,IAAM,SAAO,CAAC,IAAI,CAAC,gCAC5E,UAAC,SAAO,WACN,WAAC,SAAO,EACN,OAAO,WACP,IAAI,IACJ,SAAU,CAAE,KAAM,EAAG,EACrB,cAAe,CACb,KAAM,kBACN,QAAS,GAAA,SAAK,GAChB,EACA,SAAU,EACV,UAAW,CACT,aAAc,CAAE,WAAY,WAAO,UAAW,UAAM,EACpD,iBAAkB,CAChB,QAAS,AAAC,IACR,EAAE,cAAc,GAChB,SAAO,CAAC,IAAI,CAAC,uBACf,CACF,CACF,YAEA,UAAC,SAAa,EACZ,KAAK,OACL,MAAM,gBACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,qCAAsB,EAAE,CAC3D,UAAW,CACT,kBAAW,CAAE,KAAM,iBAAU,EAC7B,kBAAW,CAAE,KAAM,iBAAU,CAC/B,IAGF,UAAC,SAAW,EACV,KAAK,iBACL,MAAM,mCACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,wDAAiC,EAAE,CACtE,SAAU,CAAE,KAAM,EAAG,IAGvB,UAAC,SAAW,EAAC,KAAK,aAAa,MAAM,mBAAW,SAAU,CAAE,KAAM,EAAG,IAErE,UAAC,SAAe,EACd,KAAK,iBACL,MAAM,oCACN,SAAU,CAAE,KAAM,EAAG,EACrB,WAAY,CAAE,KAAM,CAAE,IAGxB,UAAC,SAAiB,EAChB,KAAK,SACL,MAAM,kBACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,uCAAwB,EAAE,CAC7D,WAAY,CAAE,OAAQ,YAAa,IAGrC,UAAC,SAAiB,EAChB,KAAK,UACL,MAAM,wBACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,6CAAyB,EAAE,CAC9D,WAAY,CAAE,OAAQ,YAAa,IAGrC,UAAC,SAAY,EACX,KAAK,OACL,MAAM,sBACN,IAAK,EACL,IAAK,IACL,WAAY,CAAE,UAAW,EAAG,WAAY,GAAI,IAG9C,UAAC,SAAY,EACX,KAAK,UACL,MAAM,qBACN,IAAK,EACL,WAAY,CACV,UAAW,EACX,UAAW,AAAC,GAAO,EAAI,CAAC,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,wBAAyB,KAAO,GACtE,OAAQ,AAAC,GAAM,OAAO,AAAC,CAAA,GAAK,EAAC,EAAG,OAAO,CAAC,KAAM,IAChD,IAGF,UAAC,SAAW,EAAC,KAAK,cAAc,MAAM,6BAEtC,UAAC,SAAiB,EAChB,KAAK,UACL,MAAM,mBACN,WAAY,CAAE,OAAQ,YAAa,WAM/C"}